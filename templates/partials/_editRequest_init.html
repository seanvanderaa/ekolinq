<!-- edit_request.html -->
<div id="request-id-modal" class="content-width align-center">
  <div style="flex: 1;">
    <h2>Edit a Request</h2>
    <p style="max-width: 400px;">
      Enter your six-digit request confirmation number and your email to edit the details of your request. 
      You can find this number in your confirmation email.
      <br><br>
      <span style="font-style: italic;">
        Can't find your confirmation email?
        <a onclick="openContactPopup()" style="color: var(--m-green); text-decoration: underline;">Contact us.</a>
      </span>
    </p>
  </div>
  
  <form id="edit-request-form" action="{{ url_for('edit_request') }}" method="POST">
    {{ edit_request_form.hidden_tag() }}  {# This includes the CSRF token #}
    
    <div class="form-group">
      <label class="edit-request-label" for="{{ edit_request_form.request_id.id }}">Request ID</label>
      {{ edit_request_form.request_id(id=edit_request_form.request_id.id, placeholder="000000") }}
    </div>
    <div class="form-group">
      <label class="edit-request-label" for="{{ edit_request_form.requester_email.id }}">Email</label>
      {{ edit_request_form.requester_email(id=edit_request_form.requester_email.id, placeholder="janedoe@gmail.com") }}
    </div>
    <button type="submit" class="action-btn align-center">Submit</button>
  </form>
</div>
<div class="flash-messages align-right">
  {% with msgs = get_flashed_messages(with_categories=True) %}
  {% if msgs %}
    {% for category, message in msgs %}
      <div class="alert alert-{{ category }} flash-message">
        {{ message }}
      </div>
    {% endfor %}
  {% endif %}
  {% endwith %}
</div>

<script>
  // Wait until the DOM is fully loaded
  document.addEventListener('DOMContentLoaded', function() {
    // Select all flash-message elements
    const flashes = document.querySelectorAll('.flash-message');
    
    // For each one, attach a click handler that hides it
    flashes.forEach(function(msg) {
      msg.addEventListener('click', function() {
        // Option 1: simply remove it from layout
        msg.style.display = 'none';
        
        // Option 2: remove it from the DOM entirely
        // msg.remove();
      });
    });
  });
</script>

